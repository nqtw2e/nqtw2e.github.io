<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Episodes - Hanoi Study Year</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    /* Additional styles specific to episodes page */
    .episode-panel {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: var(--color-white);
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      height: 100%;
      overflow-y: auto;
      visibility: hidden;
      box-shadow: var(--shadow-xl);
    }

    .episode-panel.active {
      transform: translateY(0);
      visibility: visible;
    }

    .episode-panel-header {
      position: sticky;
      top: 0;
      background-color: var(--color-white);
      padding: var(--spacing-md);
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--color-border-light);
    }

    .episode-panel-title {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--color-text);
    }

    .close-btn {
      color: var(--color-text);
      font-size: 1.5rem;
      cursor: pointer;
      padding: var(--spacing-xs);
    }

    .episode-list {
      padding: var(--spacing-md);
    }

    .episode-item {
      display: flex;
      align-items: center;
      margin-bottom: var(--spacing-sm);
      background-color: var(--color-text);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      gap: var(--spacing-md);
    }

    .episode-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .episode-item.locked {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .episode-thumbnail {
      width: 70%;
      height: 190px;
      object-fit: cover;
      flex-shrink: 0;
      transform: translateX(-10%);
    }

    .episode-thumbnail-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 70%;
      height: 100%;
      background: radial-gradient(circle, rgba(51, 36, 33, 0) 1%, rgba(51, 36, 33, 0.3) 63%, rgba(51, 36, 33, 0.8) 95%, rgba(51, 36, 33, 0.9) 100%);
      z-index: 2;
    }

    .episode-content {
      display: flex;
      flex-grow: 1;
      align-items: center;
      gap: var(--spacing-md);
      flex-direction: column;
      position: absolute;
      right: 0;
      background: linear-gradient(90deg, rgba(51, 36, 33, 0.6) 0%, rgba(51, 36, 33, 0.75) 23%, rgba(51, 36, 33, 0.9) 40%, rgba(51, 36, 33, 0.9) 100%);
      height: 100%;
      padding: 20px;
      width: 50%;
      border-top-left-radius: var(--radius-md);
      border-bottom-left-radius: var(--radius-md);
      backdrop-filter: blur(10px);
      z-index: 3;
    }

    .episode-number {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--color-text);
      min-width: 40px;
      text-align: center;
    }

    .episode-info {
      flex-grow: 1;
    }

    .episode-title {
      font-size: 1.1rem;
      font-weight: bold;
      color: var(--color-primary);
      margin-bottom: var(--spacing-xs);
    }

    .episode-description {
      font-size: 0.9rem;
      color: var(--color-white);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .episode-meta {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      margin-left: auto;
    }

    .episode-duration {
      color: var(--color-text-muted);
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .episode-status {
      color: var(--color-text-muted);
      font-size: 1.2rem;
    }

    .episode-status.watched {
      color: var(--color-primary);
    }

    .episode-status.locked {
      color: var(--color-text-muted);
    }

    .episode-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background-color: var(--color-primary);
      transition: width 0.3s ease;
    }
  </style>
</head>

<body>
  <div class="episode-panel" id="episode-panel">
    <div class="episode-panel-header">
      <h2 class="episode-panel-title">Hanoi Study Year - Episodes</h2>
      <div class="close-btn" id="close-panel">&times;</div>
    </div>
    <div class="episode-list" id="episode-list">
      <!-- Episodes will be populated here -->
    </div>
  </div>

  <script>
    const storyData = [{
      "id": 1,
      "character": "Liam",
      "title": "Hanoi Study Year",
      "category": "Student Life",
      "level": "A2",
      "description": "Join Liam, a college student on his study abroad year in Hanoi. Help him navigate campus life, order street food like a local, and make new friends. Perfect for learning essential daily conversation.",
      "episodes": 10,
      "seasons": 1,
      "stars": 4.5,
      "progress": 25,
      "imageUrl": "https://plus.unsplash.com/premium_photo-1661436612606-11b3af6451f2?q=80&w=1460&auto=format&fit=crop",
      "featured": false,
      "suggested": false,
      "tags": ["student life", "hanoi", "daily"]
    }];

    // Create episodes array for "Hanoi Study Year"
    const hanoiStudyYearEpisodes = [];

    for (let i = 1; i <= storyData[0].episodes; i++) {
      const thumbnailUrl = `https://picsum.photos/id/${100 + i}/1280/720`;

      hanoiStudyYearEpisodes.push({
        id: `${storyData[0].id}_${i}`,
        storyId: storyData[0].id,
        episodeNumber: i,
        title: `Episode ${i}: ${storyData[0].title} - Part ${i}`,
        description: `This is episode ${i} of the "${storyData[0].title}" story.`,
        videoUrl: `https://example.com/videos/story${storyData[0].id}/episode${i}.mp4`,
        thumbnailUrl: thumbnailUrl,
        duration: "05:30",
        watched: i <= (storyData[0].progress / 10) ? true : false,
      });
    }

    // DOM Elements
    const episodePanel = document.getElementById('episode-panel');
    const episodeList = document.getElementById('episode-list');
    const closePanelBtn = document.getElementById('close-panel');

    // Show panel by default
    episodePanel.classList.add('active');

    // Render episodes
    function renderEpisodes() {
      episodeList.innerHTML = hanoiStudyYearEpisodes.map(episode => `
        <div class="episode-item ${episode.watched ? 'watched' : ''}" data-id="${episode.id}">
          <div class="episode-thumbnail-overlay"></div>
          <img class="episode-thumbnail" src="${episode.thumbnailUrl}" alt="${episode.title}" loading="lazy">
          <div class="episode-content">
            <div class="episode-info">
              <div class="episode-title">${episode.title}</div>
              <div class="episode-description">${episode.description}</div>
            </div>
            <div class="episode-meta">
              <div class="episode-duration">${episode.duration}</div>
              <div class="episode-status ${episode.watched ? 'watched' : ''}">
                ${episode.watched ? 'âœ“' : ''}
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Event Listeners
    closePanelBtn.addEventListener('click', () => {
      window.location.href = 'stories.html';
    });

    episodeList.addEventListener('click', (e) => {
      const episodeItem = e.target.closest('.episode-item');
      if (episodeItem) {
        const episodeId = episodeItem.dataset.id;
        // Handle episode click - you can add your logic here
        console.log('Episode clicked:', episodeId);
      }
    });

    // Initialize
    renderEpisodes();
  </script>
</body>

</html>